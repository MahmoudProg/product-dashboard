<!-- Loading skeletons -->
<div *ngIf="loading" class="grid">
  <ngx-skeleton-loader
    *ngFor="let item of [1,2,3,4,5,6]"
    appearance="line"
    [theme]="{ width: '100%', height: '20rem' }">
  </ngx-skeleton-loader>
</div>

<!-- Error message -->
<div *ngIf="error" class="error">
  <p>{{ error }}</p>
</div>

<!-- Product grid -->
<div class="grid" *ngIf="!loading">
  <div
    class="card"
    *ngFor="let product of products; trackBy: trackByProduct"
  >
    <div class="image-container" [routerLink]="['/products', product.id]">
      <img [src]="product.image" [alt]="product.title" />
    </div>
    <div class="content">
      <h3>{{ product.title }}</h3>
      <div class="category-Rating">
        <p class="category">
          {{ product.category }}
        </p>
        <div class="Rating">
          <span class="star">â˜…</span>
          <strong class="rating-value"> {{ product.rating?.rate }} </strong>
          <span>({{ product.rating?.count }})</span>
        </div>
      </div>

      <div class="custom-divider"></div>

      <div class="add-to-cart-and-price">
        <strong class="price">{{ product.price | currency }}</strong>

        <!-- Cart button -->
        <ng-container *ngIf="isInCart(product.id) | async; else addCartBtn">
          <button
            (click)="removeFromCart.emit(product.id)"
            appButtonStyle="remove"
          >
            {{ 'REMOVE_FROM_CART' | translate }}
          </button>
        </ng-container>
        <ng-template #addCartBtn>
          <button
            appButtonStyle="add"
            (click)="addToCart.emit(product)"
          >
            {{ 'ADD_TO_CART' | translate }}
          </button>
        </ng-template>
      </div>
    </div>
  </div>
</div>
