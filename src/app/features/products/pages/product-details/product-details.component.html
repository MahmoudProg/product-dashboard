<div class="container pt-3">

  <!-- Loading state -->
  <div *ngIf="loading$ | async" class="loading">
    Loading product...
  </div>

  <!-- Error state -->
  <div *ngIf="error$ | async as error" class="error">
    {{ error }}
  </div>

  <!-- Product details -->
  <ng-container *ngIf="product$ | async as product">
    <div class="row">
      <div class="col-12">
        <button (click)="goBack()">Go Back</button>
      </div>
      <div class="col-12 col-md-6 mb-3 p-5">

        <img [src]="product.image" [alt]="product.title" class="img-fluid w-md-auto" />


      </div>

      <div class="col-12 col-md-6 mt-md-5">
        <h2 Class="mb-3">{{ product.title }}</h2>
        <p class="mb-3 currency">{{ product.price | currency }}</p>
        <app-rating-stars [rate]="product.rating?.rate ?? 0" [count]="product.rating?.count ?? 0" [showText]="true">
        </app-rating-stars>
        <p class="mt-3"><strong>Category</strong> <br>{{ product.category }}</p>
        <p class="mt-3"><strong>Description</strong> <br> {{ product.description }}</p>

        <div class="d-flex justify-content-around mt-5 mb-5">

          <!-- Favorites button -->
          <ng-container *ngIf="product$ | async as product">
            <button *ngIf="isFavorite$ | async; else addFavBtn" (click)="removeFromFavorites(product.id)"
              class="Remove-from">
              Remove from Favorites
            </button>
            <ng-template #addFavBtn>
              <button (click)="addToFavorites(product)" class="Add-to">Add to Favorites</button>
            </ng-template>
          </ng-container>


          <!-- Cart button -->
          <ng-container *ngIf="product$ | async as product">
            <button *ngIf="isInCart$ | async; else addCartBtn" (click)="removeFromCart(product.id)" class="Remove-from">
              Remove from Cart
            </button>
            <ng-template #addCartBtn>
              <button (click)="addToCart(product)" class="Add-to">Add to Cart</button>
            </ng-template>
          </ng-container>
        </div>
      </div>
    </div>


  </ng-container>
</div>
